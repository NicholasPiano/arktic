{% extends 'base.html' %}
{% load staticfiles %}

{% block css %}
<link rel="stylesheet" href="{% static 'transcription/css/transcription.css' %}">
{% endblock %}

{% block content %}
<div id="wrapper" class="container">
    <p id='load'>Loading...</p>
</div> <!-- !wrapper -->
{% endblock %}

<!-- js -->
{% block post_main_script %}
<script src="{% static 'transcription/js/transcription.js' %}"></script>
<script>
var set_delay = 2000,
    callout = function () {
        $.ajax({
            url:"/scan/{{scan_data_task.task_id}}"
        })
        .done(function (response) {
            $('#load').text($('#load').text() + response)
            if (response==' Done.') {
                $('#load').addClass('done')
            }
        })
        .always(function () {
            if (!$('#load').hasClass('done')) {
                setTimeout(callout, set_delay);
            }
        });
    };

// initial call
callout();
</script>
{% endblock %}
